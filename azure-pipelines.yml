

pr: none # pour test, uniquement pour ex√©cutions manuelles

pool:
  name: default

stages:
  - stage: build_and_dockerize
    displayName: 'Build and Dockerize Spring Boot Application'
    jobs:
      - job: build_and_dockerize
        displayName: 'Build and Dockerize Application'
        steps:
          - checkout: self

          # Step 1: Build the Spring Boot application
          - task: Maven@3
            inputs:
              mavenPomFile: 'pom.xml'
              goals: 'clean package'
              options: '-DskipTests'
            displayName: 'Build Spring Boot Application'

          # Step 2: Build Docker image
          - script: |
              docker build -t my-spring-boot-app:$(Build.BuildId) .
            displayName: 'Build Docker Image'
